# 用户态或内核态下的中断处理有什么区别？在trapframe中有什么体现？

叶子鹏 2013011404

主要体现在硬件的处理方式不同。当然，软件针对硬件的不同行为，也会有所区别。

+ 在进入中断时保存的现场不同。
+ 在退出时恢复现场不同。

从用户态进入中断时，硬件会压入一些信息到栈帧中，需要先压入ss和esp，再压入4个信息（error code，cs，eip，eflags），而从内核态进入中断时，只需要压入那4个信息。这在trapframe中有所体现。

从中断返回时，硬件会从栈帧中pop一些信息。对应进入中断，中断返回pop的数量是相同的。如果返回到用户态，则会pop出6个信息，如果返回到内核态，只pop出4个信息。

