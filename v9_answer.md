#lab0 SPOC思考题

沈哲言 && 叶子鹏

###funcall中的堆栈有多大？是内核态堆栈还是用户态堆栈

124MB - 可执行文件的长度(B8) , 处于内核态(通过flags中的user位为0得到)

###funcall中的全局变量ret放在内存中何处？如何对它寻址？

放在代码和常量之后，具体位置在链接和运行时决定(1C+8C = A8)，通过PC进行寻址（PC+offset），使用SG指令

###funcall中的字符串放在内存中何处？如何对它寻址？

放在代码之后，代码之后就是代码中涉及的常量。用LEAG指令通过PC寻址，地址为PC+offset，其中offset为1C

###局部变量i在内存中的何处？如何对它寻址？

i是等于n的，而i=n之后n就不用了，所以i在内存n所在的地方，每次取出来减一再存回去。n是存在栈帧中，所以是堆栈寻址。

###当前系统是处于中断使能状态吗？

否，通过flags寄存器的iena域可知。

###funcall中的函数参数是如何传递的？函数返回值是如何传递的？

通过栈帧传递，使用PSHA进行堆栈。返回值通过a寄存器传递。

###分析并说明funcall执行文件的格式和内容 　

00000000~00000003: Magic Number 0xC0DEF00D
00000004~00000007: bss，代码区的长度
00000008~0000000b: entry，代码的入口位置
0000000c~0000000f: flags，值为0
00000010~0000009c: 代码的汇编码
000000a0~000000b4: 常量数据
